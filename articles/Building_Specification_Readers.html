<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Building Specification Readers • metacore</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Building Specification Readers">
<meta property="og:description" content="metacore">
<meta property="og:image" content="/reference/figures/metacore.PNG">
<meta property="og:image:alt" content="metacore Hex Sticker">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metacore</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Building_Specification_Readers.html">Building Specification Readers</a>
    </li>
    <li>
      <a href="../articles/Example.html">Example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/atorus-research/metacore/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Building_Specification_Readers_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Building Specification Readers</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/atorus-research/metacore/blob/HEAD/vignettes/Building_Specification_Readers.Rmd" class="external-link"><code>vignettes/Building_Specification_Readers.Rmd</code></a></small>
      <div class="hidden name"><code>Building_Specification_Readers.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://atorus-research.github.io/metacore/" class="external-link">metacore</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span></code></pre></div>
<p>The first thing to do when trying to build a specification reader is to try the default. By default metacore can read in specifications that are in the Pinnacle 21 specification format. If your document isn’t in that format, it is still worth trying the default readers, as the error messages can be helpful.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spec_to_metacore.html">spec_to_metacore</a></span><span class="op">(</span><span class="fu"><a href="../reference/metacore_example.html">metacore_example</a></span><span class="op">(</span><span class="st">"mock_spec.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Unable to rename the following columns in Domains:</span></span>
<span><span class="co">#&gt;  label matches 2 columns</span></span>
<span><span class="co">#&gt; Please check your regular expression</span></span></code></pre></div>
<p>As we can see, the mock spec we are using here doesn’t match the format. Therefore we will have to build a bespoke reader. Before we start, it is important to understand the structure of the metacore object. Each object acts as its own database for all dataset related metadata. The object has 7 tables and their general purpose are as follows:</p>
<ul>
<li><p><strong>ds_spec</strong>: Contains dataset level information</p></li>
<li><p><strong>ds_vars</strong>: Bridges the dataset and variable level information</p></li>
<li><p><strong>var_spec</strong>: Contains variable level information</p></li>
<li><p><strong>value_spec</strong>: Contains value level information</p></li>
<li><p><strong>derivations</strong>: Contains all derivations</p></li>
<li><p><strong>codelist</strong>: Contains information about code/decodes, permitted values and external libraries</p></li>
<li><p><strong>supp</strong>: Contains information specific to supplemental variables</p></li>
</ul>
<p>Here is a schema of how all this fits together</p>
<p><img src="../reference/figures/labeled_schema.png" title="Metacore Schema"></p>
<p>ds_spec is connected to ds_vars by the ‘dataset’ variable and ds_vars is connected to var_spec by the ‘variable’ variable, etc. For more information on the make-up of metacore objects please see the README.</p>
<p>Now that we understand what makes a metacore object, we can start to develop the reader.</p>
<p>First, we need to identify what type of specification format you have. At the moment we support a specification where each tab contains information relevant to a different table, such as a domain tab, a variable tab, etc. To test this you can use the <code>spec_type</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">metacore</span><span class="fu">:::</span><span class="fu"><a href="../reference/spec_type.html">spec_type</a></span><span class="op">(</span><span class="fu"><a href="../reference/metacore_example.html">metacore_example</a></span><span class="op">(</span><span class="st">"mock_spec.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "by_type"</span></span></code></pre></div>
<p>Given we have the type style of specification, we can attempt to run with the lower level built-in specification to metacore build. There are 6 lower level specification builders to match each of the 6 datasets needed, spec_type_to_*. Even if these fail, the error messages should help identify the issues.</p>
<p>But, before we start any of that, we need to read in our document using the <code>read_all_sheets</code> function. This function reads in a multisheet excel file into a named list, where the name of each dataset is the name of the tab. The lower level specification builders do assume the provided <code>doc</code> is a named list. This mock specification has 5 tabs, domain, variables, value level metadata, controlled terms, and computational method. So it looks like we might need to split the information in these tabs to get the 6 tables needed for the metacore object.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_all_sheets.html">read_all_sheets</a></span><span class="op">(</span><span class="fu"><a href="../reference/metacore_example.html">metacore_example</a></span><span class="op">(</span><span class="st">"mock_spec.xlsx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">doc</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">head</span><span class="op">)</span></span>
<span><span class="co">#&gt; $Domains</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 10</span></span></span>
<span><span class="co">#&gt;   Domain Na…¹ Label Repea…² Is Re…³ Class Source Data …⁴ Key V…⁵ Descr…⁶ Docum…⁷</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ADDS        Disp… Y       N       BDS   DS     One re… USUBJI… Contai… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ADRACE      Race… Y       N       OTHER DM, S… One re… USUBJI… <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ADTRT       Trea… Y       N       OTHER ADSL   One re… USUBJI… To be … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ADSL        Subj… N       N       ADSL  <span style="color: #BB0000;">NA</span>     One re… USUBJI… <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​`Domain Name`, ²​Repeating,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ³​`Is Reference?`, ⁴​`Data Structure`, ⁵​`Key Variables`, ⁶​Description,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁷​Documentation</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Variables</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 18</span></span></span>
<span><span class="co">#&gt;   Domain N…¹ Thera…² Indic…³ Varia…⁴ Label Type  Max L…⁵ Varia…⁶ Manda…⁷ Signf…⁸</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ADAE       CORE    CORE    STUDYID Stud… Text  9       10      Y       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ADAE       CORE    CORE    USUBJID Uniq… Text  30      20      Y       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ADAE       CORE    CORE    SUBJID  Subj… Text  20      25      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ADAE       CORE    CORE    SITEID  Stud… Text  10      30      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ADAE       CORE    CORE    AGE     Age   Inte… 8       40      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ADAE       CORE    CORE    SEX     Sex   Text  1       50      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 8 more variables: `Sort Order` &lt;chr&gt;, Required &lt;chr&gt;, Origin &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Value Level Metadata` &lt;chr&gt;, `Controlled Term or Format` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Computational Method` &lt;chr&gt;, `Definition / Comments` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Additional Information` &lt;chr&gt;, and abbreviated variable names</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`Domain Name`, ²​`Therapeutic Area`, ³​Indication, ⁴​`Variable Name`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁵​`Max Length`, ⁶​`Variable Order`, ⁷​Mandatory, ⁸​`Signficant Digits`</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Value_level_Metadata</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 0 × 13</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 13 variables: VLM Name &lt;chr&gt;, Therapeutic Area &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Indication &lt;chr&gt;, Parameter Code &lt;chr&gt;, Parameter &lt;chr&gt;, Type &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Max Length &lt;chr&gt;, Signficant Digits &lt;chr&gt;, Origin &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Controlled Term &lt;chr&gt;, Computational Method &lt;chr&gt;, Mandatory &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   Definition/Comments &lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Controlled_Terms</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   `Codelist Name` `Codelist Code` Coded V…¹ Descr…² Code …³ Exten…⁴ Rank  Source</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SEX             SEX             F         Female  <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    GSK   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> SEX             SEX             M         Male    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    GSK   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> SEX             SEX             U         Unknown <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    GSK   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> RACE            RACE            BLACK OR… <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    GSK   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> RACE            RACE            AMERICAN… <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    GSK   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> RACE            RACE            ASIAN     <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>    GSK   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable names ¹​`Coded Value`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ²​`Description / Decoded Value`, ³​`Code Info`, ⁴​`Extension?`</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $Computational_Method</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   `Computational Method Name` `Definition / Comments`                    Addit…¹</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRTP                        Compare ADT/ASTDT to the series of ADSL.A… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRTA                        Compare ADT/ASTDT to the series of ADSL.A… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TPERIOD                     Latest value of APERIOD from ADTRT where … <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> TPERADY                     Contains the number of days from the firs… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> TPERSTDY                    Contains the number of days from the firs… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> TPERENDY                    Contains the number of days from the firs… <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with abbreviated variable name ¹​`Additional Information`</span></span></span></code></pre></div>
<p>Let’s start with making the ds_spec (dataset specification) table using <code>spec_type_to_ds_spec</code>. The ds_spec table is made of 3 columns: the dataset name, the dataset structure, and the dataset label. If we look at our specification document, it looks like all this information is in the Domains tab. Now we know what we need, we can start building the table by trying the <code>spec_type_to_ds_spec</code> function.</p>
<p>This function takes in our named list of datasets (doc), a named vector of columns (cols) and a sheet name (sheet). But, only doc is needed, the other inputs have defaults. So we can try with just the default and see what we get.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spec_type_to_ds_spec.html">spec_type_to_ds_spec</a></span><span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Unable to rename the following columns in Domains:</span></span>
<span><span class="co">#&gt;  label matches 2 columns</span></span>
<span><span class="co">#&gt; Please check your regular expression</span></span></code></pre></div>
<p>The error tells us there is an issue with the label column in the Domains table. Meaning, we need to change the default vector for the cols input because the default regular expression isn’t specific enough. First, let’s check the column names in the Domain tab</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doc</span><span class="op">$</span><span class="va">Domains</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "Domain Name"    "Label"          "Repeating"      "Is Reference?" </span></span>
<span><span class="co">#&gt;  [5] "Class"          "Source"         "Data Structure" "Key Variables" </span></span>
<span><span class="co">#&gt;  [9] "Description"    "Documentation"</span></span></code></pre></div>
<p>If we look at the default input for cols, <code>"label" = "[L|l]abel|[D|d]escription"</code>, we can see the label is matching to the <code>Label</code> and the <code>Description</code> columns .</p>
<p>We only need the Domain <code>Name</code>, <code>Label</code>, and <code>Data Structure</code> columns. So we can update the expressions to be more specific.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ds_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spec_type_to_ds_spec.html">spec_type_to_ds_spec</a></span><span class="op">(</span><span class="va">doc</span>, </span>
<span>                                cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dataset"</span> <span class="op">=</span> <span class="st">"Name"</span>, </span>
<span>                                         <span class="st">"structure"</span> <span class="op">=</span> <span class="st">"Data Structure"</span>,  </span>
<span>                                         <span class="st">"label"</span> <span class="op">=</span> <span class="st">"Label"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ds_spec</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 4 × 3</span></span></span>
<span><span class="co">#&gt;   dataset structure                                                    label    </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ADDS    One record per subject per datetime per parameter per result Disposit…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ADRACE  One record per subject per analysis sequence number          Race Ana…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ADTRT   One record per subject per period                            Treatmen…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ADSL    One record per subject                                       Subject-…</span></span></code></pre></div>
<p>Regular expressions are used to match the columns, so if you needed a more flexible input, you could do that. Now, we have the ds_spec table we can move on to the ds_vars table.</p>
<p>The ds_vars table has 7 columns:</p>
<ul>
<li><p>dataset: dataset name</p></li>
<li><p>variable: variable name</p></li>
<li><p>key_seq: integers controlling the sort order of each dataset</p></li>
<li><p>order: integer controlling the column order of each dataset</p></li>
<li><p>keep: boolean to determine if the variable is needed</p></li>
<li><p>core: ADaM core (Expected, Required, Permissible)</p></li>
<li><p>supp_flag: boolean to determine if the variable is in the supplementals</p></li>
</ul>
<p>When we look back at our specification document we can see all this information is in the variable tab. The inputs for the <code>spec_type_to_ds_vars</code> function are the same as before, but with slightly different defaults. By default ds_vars only checks sheets labeled “Variable” (this is because all the settings are defaulted to read in P21 formatted specs). But, those default work for our specifications cause all the information is in the variable tab; so we can try with just the defaults again.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/spec_type_to_ds_vars.html">spec_type_to_ds_vars</a></span><span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error: Unable to rename the following columns in Variables:</span></span>
<span><span class="co">#&gt;  variable matches 2 columns</span></span>
<span><span class="co">#&gt;  order matches 2 columns</span></span>
<span><span class="co">#&gt; Please check your regular expression</span></span></code></pre></div>
<p>This error means it is trying to match the sheet entitled Variable, the variable column matches to two different columns. This is the same error we had before. We just need to have a quick look at the columns and adjust the regular expression to be more specific. Additionally, for the key sequence variable isn’t in the variable tab. We saw this information above in the domain tab. So we will need to do two things to fix this. First, adjust the dataset name in the <code>key_seq_cols</code> argument. Second, change the sheets to include the variable and the domain sheet.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">doc</span><span class="op">$</span><span class="va">Variables</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 18</span></span></span>
<span><span class="co">#&gt;   Domain N…¹ Thera…² Indic…³ Varia…⁴ Label Type  Max L…⁵ Varia…⁶ Manda…⁷ Signf…⁸</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ADAE       CORE    CORE    STUDYID Stud… Text  9       10      Y       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ADAE       CORE    CORE    USUBJID Uniq… Text  30      20      Y       <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ADAE       CORE    CORE    SUBJID  Subj… Text  20      25      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ADAE       CORE    CORE    SITEID  Stud… Text  10      30      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ADAE       CORE    CORE    AGE     Age   Inte… 8       40      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ADAE       CORE    CORE    SEX     Sex   Text  1       50      <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 8 more variables: `Sort Order` &lt;chr&gt;, Required &lt;chr&gt;, Origin &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Value Level Metadata` &lt;chr&gt;, `Controlled Term or Format` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Computational Method` &lt;chr&gt;, `Definition / Comments` &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   `Additional Information` &lt;chr&gt;, and abbreviated variable names</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ¹​`Domain Name`, ²​`Therapeutic Area`, ³​Indication, ⁴​`Variable Name`,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ⁵​`Max Length`, ⁶​`Variable Order`, ⁷​Mandatory, ⁸​`Signficant Digits`</span></span></span>
<span></span>
<span><span class="va">ds_vars</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/spec_type_to_ds_vars.html">spec_type_to_ds_vars</a></span><span class="op">(</span><span class="va">doc</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dataset"</span> <span class="op">=</span> <span class="st">"Domain"</span>,</span>
<span>                                             <span class="st">"variable"</span> <span class="op">=</span> <span class="st">"[V|v]ariable [N|n]ame"</span>,</span>
<span>                                             <span class="st">"order"</span> <span class="op">=</span> <span class="st">"[V|v]ariable [O|o]rder"</span>,</span>
<span>                                             <span class="st">"keep"</span> <span class="op">=</span> <span class="st">"[M|m]andatory"</span><span class="op">)</span>,</span>
<span>                               key_seq_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dataset"</span> <span class="op">=</span> <span class="st">"Domain Name"</span>,</span>
<span>                                                <span class="st">"key_seq"</span> <span class="op">=</span> <span class="st">"Key"</span><span class="op">)</span>,</span>
<span>                               sheet <span class="op">=</span> <span class="st">"[V|v]ar|Domains"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ds_vars</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 7</span></span></span>
<span><span class="co">#&gt;   dataset variable order keep  key_seq core  supp_flag</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ADAE    STUDYID     10 TRUE       <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ADAE    USUBJID     20 TRUE       <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ADAE    SUBJID      25 <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ADAE    SITEID      30 <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ADAE    AGE         40 <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ADAE    SEX         50 <span style="color: #BB0000;">NA</span>         <span style="color: #BB0000;">NA</span> <span style="color: #BB0000;">NA</span>    <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>The next table we have is var_spec, the table of variable level metadata. var_spec is separate from ds_vars because, in accordance with CDISC standards, labels and lengths should be the same for a given variable across all datasets. So, we are able to normalize the data to only have one row per variable, which ensures this rule and helps reduce the size of the object. There are 6 columns in var_spec:</p>
<ul>
<li><p>variable: variable name</p></li>
<li><p>length: variable length</p></li>
<li><p>label: variable label</p></li>
<li><p>type: variable Class</p></li>
<li><p>format: variable format</p></li>
<li><p>common: boolean if variable is common across ADaM</p></li>
</ul>
<p>Looking back at our specification we see this will also be built using the Variable tab. So, we know we need to edit the regular expression for the variable to make it more specific. Additionally, if you look at the default for <code>cols</code> you see there is a dataset input. This is because some standards aren’t 100% consistent, some variables (e.g. visit) have different lengths depending on the dataset. <strong>So to accommodate this some of the variables in var_spec are in the ds.variable format</strong>. These builders will do this conversion for you , but the dataset is needed. The other thing the builders can automatically deal with is the common variable. If given a dataset column, the builder function will automatically figure out which variables are common to all dataset. This is good because we don’t have a common variable in our specs.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">var_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spec_type_to_var_spec.html">spec_type_to_var_spec</a></span><span class="op">(</span><span class="va">doc</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"variable"</span> <span class="op">=</span> <span class="st">"Variable Name"</span>,</span>
<span>                                                <span class="st">"length"</span> <span class="op">=</span> <span class="st">"[L|l]ength"</span>,</span>
<span>                                                <span class="st">"label"</span> <span class="op">=</span> <span class="st">"[L|l]abel"</span>,</span>
<span>                                                <span class="st">"type"</span> <span class="op">=</span> <span class="st">"[T|t]ype"</span>,</span>
<span>                                                <span class="st">"dataset"</span> <span class="op">=</span> <span class="st">"[D|d]ataset|[D|d]omain"</span>,</span>
<span>                                                <span class="st">"format"</span> <span class="op">=</span> <span class="st">"Format"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">var_spec</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 6</span></span></span>
<span><span class="co">#&gt;   variable length label                            type    format common</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> STUDYID       9 Study Identifier                 Text    <span style="color: #BB0000;">NA</span>     TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> USUBJID      30 Unique Subject Identifier        Text    <span style="color: #BB0000;">NA</span>     TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> SUBJID       20 Subject Identifier for the Study Text    <span style="color: #BB0000;">NA</span>     FALSE </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> SITEID       10 Study Site Identifier            Text    <span style="color: #BB0000;">NA</span>     TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> AGE           8 Age                              Integer <span style="color: #BB0000;">NA</span>     TRUE  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> SEX           1 Sex                              Text    SEX    TRUE</span></span></code></pre></div>
<p>There is one issue here: the format column is also the codelist names. This is because the information came from the “Controlled Term or Format” column of my spec document. So the final step of preparing var_spec table is to remove the controlled terms. It is easy here because all the formats end in a full stop (.), but the controlled terms don’t.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">var_spec</span> <span class="op">&lt;-</span> <span class="va">var_spec</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>   <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>format <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">format</span>, <span class="st">"\\."</span><span class="op">)</span>, <span class="va">format</span>, <span class="st">""</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The next dataset is value_spec, which contains the value level metadata. It is made up of 8 columns:</p>
<ul>
<li><p>dataset: dataset name</p></li>
<li><p>variable: variable name</p></li>
<li><p>origin: origin of data</p></li>
<li><p>type: value type</p></li>
<li><p>sig_dig: significant digits of the value</p></li>
<li><p>code_id: id used to cross-reference the code/decode</p></li>
<li><p>where: value of the variable</p></li>
<li><p>derivation_id: id used to cross-reference the derivation</p></li>
</ul>
<p>By default, <code>spec_type_to_value_spec</code> is set up to have the where information on a different sheet because that is the format of a P21 spec, but in our spec we don’t have that. In fact, we don’t have any value level metadata in our spec. But, that is fine - the default builders will just pull what information it can from the variable tab. Additionally this spec doesn’t have a predecessor column, so we can just use the method column.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">value_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spec_type_to_value_spec.html">spec_type_to_value_spec</a></span><span class="op">(</span><span class="va">doc</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dataset"</span> <span class="op">=</span> <span class="st">"VLM Name|Domain"</span>,</span>
<span>                                                    <span class="st">"variable"</span> <span class="op">=</span> <span class="st">"VLM Name|Variable Name"</span>,</span>
<span>                                                    <span class="st">"origin"</span> <span class="op">=</span> <span class="st">"[O|o]rigin"</span>,</span>
<span>                                                    <span class="st">"type"</span> <span class="op">=</span> <span class="st">"[T|t]ype"</span>,</span>
<span>                                                    <span class="st">"code_id"</span> <span class="op">=</span> <span class="st">"Controlled Term"</span>,</span>
<span>                                                    <span class="st">"where"</span> <span class="op">=</span> <span class="st">"Parameter Code"</span>,</span>
<span>                                                    <span class="st">"derivation_id"</span> <span class="op">=</span> <span class="st">"Method"</span>,</span>
<span>                                                    <span class="st">"predecessor"</span> <span class="op">=</span> <span class="st">"Method"</span><span class="op">)</span>,</span>
<span>                                      where_sep_sheet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">value_spec</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 8</span></span></span>
<span><span class="co">#&gt;   dataset variable origin      type    code_id derivation_id where sig_dig</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> ADAE    STUDYID  Predecessor Text    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>            TRUE       <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> ADAE    USUBJID  Predecessor Text    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>            TRUE       <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> ADAE    SUBJID   Predecessor Text    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>            TRUE       <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> ADAE    SITEID   Predecessor Text    <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>            TRUE       <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> ADAE    AGE      Predecessor Integer <span style="color: #BB0000;">NA</span>      <span style="color: #BB0000;">NA</span>            TRUE       <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> ADAE    SEX      Predecessor Text    SEX     <span style="color: #BB0000;">NA</span>            TRUE       <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>The derivation table is relatively simple by comparison. It just has two columns, the derivation id and the derivation. But, the derivation comes from the supplied derivation, predecessor, or comment column depending on the origin. In this mock we don’t have a predecessor column so we can set to comment as well.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">derivation</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spec_type_to_derivations.html">spec_type_to_derivations</a></span><span class="op">(</span><span class="va">doc</span>, cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"derivation_id"</span> <span class="op">=</span> <span class="st">"Name"</span>,</span>
<span>                                                     <span class="st">"derivation"</span> <span class="op">=</span> <span class="st">"[D|d]efinition|[D|d]escription"</span><span class="op">)</span>, </span>
<span>                                       var_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dataset"</span> <span class="op">=</span> <span class="st">"Domain Name"</span>,</span>
<span>                                                    <span class="st">"variable"</span> <span class="op">=</span> <span class="st">"Variable Name|VLM"</span>,</span>
<span>                                                    <span class="st">"origin"</span> <span class="op">=</span> <span class="st">"[O|o]rigin"</span>,</span>
<span>                                                    <span class="st">"predecessor"</span> <span class="op">=</span> <span class="st">"Comment"</span>,</span>
<span>                                                    <span class="st">"comment"</span> <span class="op">=</span> <span class="st">"Comment"</span><span class="op">)</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">derivation</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 2</span></span></span>
<span><span class="co">#&gt;   derivation_id derivation                                                      </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> TRTP          Compare ADT/ASTDT to the series of ADSL.APxxSDT and ADSL.APxxED…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> TRTA          Compare ADT/ASTDT to the series of ADSL.APxxSDT and ADSL.APxxED…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> TPERIOD       Latest value of APERIOD from ADTRT where ADTRT.TRSDT/ADTRT.TRSD…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> TPERADY       Contains the number of days from the first exposure date in the…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> TPERSTDY      Contains the number of days from the first exposure date in the…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> TPERENDY      Contains the number of days from the first exposure date in the…</span></span></code></pre></div>
<p>The final table is codelist. This table contains all the code/decode pairs, all lists of permitted values and information about external libraries. What is somewhat special about the structure of this table is there isn’t just a code and a decode column, but rather a codes column that contains a list of code/decode tables, permitted value vectors and external dictionary vectors. So there is one row per code (i.e. a row for country and one for yes/no codes etc.). This structure makes it easier to see all the codes at once and allows some code to be numeric and others to be character.</p>
<p>By default the <code>spec_type_to_codelist</code> function expects codelists and external dictionaries. But, in the specification we only have codelist so <code>dict_cols</code> needs to be set to null.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">codelist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/spec_type_to_codelist.html">spec_type_to_codelist</a></span><span class="op">(</span><span class="va">doc</span>, codelist_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"code_id"</span> <span class="op">=</span> <span class="st">"Codelist Code"</span>,</span>
<span>                                                         <span class="st">"name"</span> <span class="op">=</span> <span class="st">"Codelist Name"</span>,</span>
<span>                                                         <span class="st">"code"</span> <span class="op">=</span> <span class="st">"Coded Value"</span>,</span>
<span>                                                         <span class="st">"decode"</span> <span class="op">=</span> <span class="st">"Decoded Value"</span><span class="op">)</span>,</span>
<span>                                  simplify <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                                  dict_cols <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">codelist</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 4</span></span></span>
<span><span class="co">#&gt;   code_id name    type        codes           </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> SEX     SEX     code_decode <span style="color: #949494;">&lt;tibble [3 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> RACE    RACE    code_decode <span style="color: #949494;">&lt;tibble [5 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> COUNTRY COUNTRY code_decode <span style="color: #949494;">&lt;tibble [2 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> NY      NY      code_decode <span style="color: #949494;">&lt;tibble [2 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> DATEFL  DATEFL  code_decode <span style="color: #949494;">&lt;tibble [2 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> AESEV   AESEV   code_decode <span style="color: #949494;">&lt;tibble [3 × 2]&gt;</span></span></span></code></pre></div>
<p>Now we have all the tables we need we can make the metacore object</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/metacore.html">metacore</a></span><span class="op">(</span><span class="va">ds_spec</span>, <span class="va">ds_vars</span>, <span class="va">var_spec</span>, <span class="va">value_spec</span>,</span>
<span>         <span class="va">derivation</span>, <span class="va">codelist</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: core from the ds_vars table only contain missing values.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; supp_flag from the ds_vars table only contain missing values.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; sig_dig from the value_spec table only contain missing values.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; dataset from the supp table only contain missing values.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; variable from the supp table only contain missing values.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; idvar from the supp table only contain missing values.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; qeval from the supp table only contain missing values.</span></span>
<span><span class="co">#&gt; Warning: The following variables have derivation ids not found in the derivations table:</span></span>
<span><span class="co">#&gt;  ASTDT</span></span>
<span><span class="co">#&gt;  ASTTM</span></span>
<span><span class="co">#&gt;  ASTDTM</span></span>
<span><span class="co">#&gt;  AENDT</span></span>
<span><span class="co">#&gt;  AENTM</span></span>
<span><span class="co">#&gt;  AENDTM</span></span>
<span><span class="co">#&gt;  AFTRTSTC</span></span>
<span><span class="co">#&gt;  ALTRTSTC</span></span>
<span><span class="co">#&gt;  APFTRSTC</span></span>
<span><span class="co">#&gt;  ASTDT</span></span>
<span><span class="co">#&gt;  AFTRTST</span></span>
<span><span class="co">#&gt;  AFTRTSTC</span></span>
<span><span class="co">#&gt;  ALTRTST</span></span>
<span><span class="co">#&gt;  ALTRTSTC</span></span>
<span><span class="co">#&gt;  ASTDT</span></span>
<span><span class="co">#&gt;  ASTTM</span></span>
<span><span class="co">#&gt;  ASTDTM</span></span>
<span><span class="co">#&gt;  AENDT</span></span>
<span><span class="co">#&gt;  AENTM</span></span>
<span><span class="co">#&gt;  AENDTM</span></span>
<span><span class="co">#&gt;  CMBASE</span></span>
<span><span class="co">#&gt;  CMBASECD</span></span>
<span><span class="co">#&gt;  DOSCUMA</span></span>
<span><span class="co">#&gt;  AVISIT</span></span>
<span><span class="co">#&gt;  ATPT</span></span>
<span><span class="co">#&gt;  ADT</span></span>
<span><span class="co">#&gt;  ATM</span></span>
<span><span class="co">#&gt;  ADTM</span></span>
<span><span class="co">#&gt;  APERADY</span></span>
<span><span class="co">#&gt;  APERSTDY</span></span>
<span><span class="co">#&gt;  APERENDY</span></span>
<span><span class="co">#&gt;  ADT</span></span>
<span><span class="co">#&gt;  ATM</span></span>
<span><span class="co">#&gt;  ADTM</span></span>
<span><span class="co">#&gt;  ADT</span></span>
<span><span class="co">#&gt;  ATM</span></span>
<span><span class="co">#&gt;  ADTM</span></span>
<span><span class="co">#&gt; Warning: The following derivations are never used:</span></span>
<span><span class="co">#&gt;  AE.STUDYID: AE.STUDYID</span></span>
<span><span class="co">#&gt;  AE.USUBJID: AE.USUBJID</span></span>
<span><span class="co">#&gt;  AE.SUBJID: AE.SUBJID</span></span>
<span><span class="co">#&gt;  ADSL.SITEID: ADSL.SITEID</span></span>
<span><span class="co">#&gt;  ADSL.AGE: ADSL.AGE</span></span>
<span><span class="co">#&gt;  ADSL.SEX: ADSL.SEX</span></span>
<span><span class="co">#&gt;  ADSL.RACE: ADSL.RACE</span></span>
<span><span class="co">#&gt;  ADSL.ACOUNTRY: ADSL.ACOUNTRY</span></span>
<span><span class="co">#&gt;  ADSL.FASFL: ADSL.FASFL</span></span>
<span><span class="co">#&gt;  ADSL.ITTFL: ADSL.ITTFL</span></span>
<span><span class="co">#&gt;  ADSL.SAFFL: ADSL.SAFFL</span></span>
<span><span class="co">#&gt;  ADSL.PPROTFL: ADSL.PPROTFL</span></span>
<span><span class="co">#&gt;  ADSL.TRTxxPN that corresponds to the treatment selected in TRTP: ADSL.TRTxxPN that corresponds to the treatment selected in TRTP</span></span>
<span><span class="co">#&gt;  ADSL.TRTxxAN that corresponds to the treatment selected in TRTA: ADSL.TRTxxAN that corresponds to the treatment selected in TRTA</span></span>
<span><span class="co">#&gt;  ADSL.TRT01A: ADSL.TRT01A</span></span>
<span><span class="co">#&gt;  ADSL.TRT01AN: ADSL.TRT01AN</span></span>
<span><span class="co">#&gt;  ADSL.TRT01P: ADSL.TRT01P</span></span>
<span><span class="co">#&gt;  ADSL.TRT01PN: ADSL.TRT01PN</span></span>
<span><span class="co">#&gt;  ADSL.TRTSEQP: ADSL.TRTSEQP</span></span>
<span><span class="co">#&gt;  ADSL.TRTSEQPN: ADSL.TRTSEQPN</span></span>
<span><span class="co">#&gt;  ADSL.TRTSEQA: ADSL.TRTSEQA</span></span>
<span><span class="co">#&gt;  ADSL.TRTSEQAN: ADSL.TRTSEQAN</span></span>
<span><span class="co">#&gt;  AE.AESTDY: AE.AESTDY</span></span>
<span><span class="co">#&gt;  AE.AESTDTC: AE.AESTDTC</span></span>
<span><span class="co">#&gt;  AE.AEENDTC: AE.AEENDTC</span></span>
<span><span class="co">#&gt;  AE.AEENDY: AE.AEENDY</span></span>
<span><span class="co">#&gt;  AE.AESEQ: AE.AESEQ</span></span>
<span><span class="co">#&gt;  AE.AETERM: AE.AETERM</span></span>
<span><span class="co">#&gt;  AE.AEMODIFY: AE.AEMODIFY</span></span>
<span><span class="co">#&gt;  AE.AEDECOD: AE.AEDECOD</span></span>
<span><span class="co">#&gt;  AE.AEBODSYS: AE.AEBODSYS</span></span>
<span><span class="co">#&gt;  AE.AEBDSYCD: AE.AEBDSYCD</span></span>
<span><span class="co">#&gt;  AE.AELLT: AE.AELLT</span></span>
<span><span class="co">#&gt;  AE.AELLTCD: AE.AELLTCD</span></span>
<span><span class="co">#&gt;  AE.AEPTCD: AE.AEPTCD</span></span>
<span><span class="co">#&gt;  AE.AEHLT: AE.AEHLT</span></span>
<span><span class="co">#&gt;  AE.AEHLTCD: AE.AEHLTCD</span></span>
<span><span class="co">#&gt;  AE.AEHLGT: AE.AEHLGT</span></span>
<span><span class="co">#&gt;  AE.AEHLGTCD: AE.AEHLGTCD</span></span>
<span><span class="co">#&gt;  AE.AESOC: AE.AESOC</span></span>
<span><span class="co">#&gt;  AE.AESOCCD: AE.AESOCCD</span></span>
<span><span class="co">#&gt;  AE.AEDUR: AE.AEDUR</span></span>
<span><span class="co">#&gt;  AE.AESEV: AE.AESEV</span></span>
<span><span class="co">#&gt;  AE.AESEV or as per RAP: AE.AESEV or as per RAP</span></span>
<span><span class="co">#&gt;  AE.AEACN: AE.AEACN</span></span>
<span><span class="co">#&gt;  SUPPAE.QVAL where SUPPAE.QNAM="ACT1": SUPPAE.QVAL where SUPPAE.QNAM="ACT1"</span></span>
<span><span class="co">#&gt;  SUPPAE.QVAL where QNAM="AETRTEM": SUPPAE.QVAL where QNAM="AETRTEM"</span></span>
<span><span class="co">#&gt;  AE.AEREFID: AE.AEREFID</span></span>
<span><span class="co">#&gt;  AE.AEACNOTH: AE.AEACNOTH</span></span>
<span><span class="co">#&gt;  AE.AESER: AE.AESER</span></span>
<span><span class="co">#&gt;  AE.AESCAN: AE.AESCAN</span></span>
<span><span class="co">#&gt;  AE.AESCONG: AE.AESCONG</span></span>
<span><span class="co">#&gt;  AE.AESDISAB: AE.AESDISAB</span></span>
<span><span class="co">#&gt;  AE.AESDTH: AE.AESDTH</span></span>
<span><span class="co">#&gt;  AE.AESHOSP: AE.AESHOSP</span></span>
<span><span class="co">#&gt;  AE.AESLIFE: AE.AESLIFE</span></span>
<span><span class="co">#&gt;  AE.AESOD: AE.AESOD</span></span>
<span><span class="co">#&gt;  AE.AESMIE: AE.AESMIE</span></span>
<span><span class="co">#&gt;  SUPPAE.QVAL where QNAM="AESPROT": SUPPAE.QVAL where QNAM="AESPROT"</span></span>
<span><span class="co">#&gt;  AE.AEOUT: AE.AEOUT</span></span>
<span><span class="co">#&gt;  AE.AEREL: AE.AEREL</span></span>
<span><span class="co">#&gt;  AE.AETOXGR: AE.AETOXGR</span></span>
<span><span class="co">#&gt;  Numeric version of AETOXGR: Numeric version of AETOXGR</span></span>
<span><span class="co">#&gt;  SUPPAE.QVAL where SUPPAE.QNAM="GRADED": SUPPAE.QVAL where SUPPAE.QNAM="GRADED"</span></span>
<span><span class="co">#&gt;  SUPPAE.QVAL where SUPPAE.QNAM="AEDLT": SUPPAE.QVAL where SUPPAE.QNAM="AEDLT"</span></span>
<span><span class="co">#&gt;  SUPPAE.QVAL where SUPPAE.QNAM="AERDG1": SUPPAE.QVAL where SUPPAE.QNAM="AERDG1"</span></span>
<span><span class="co">#&gt;  xx.STUDYID: xx.STUDYID</span></span>
<span><span class="co">#&gt;  xx.USUBJID: xx.USUBJID</span></span>
<span><span class="co">#&gt;  ADSL.SUBJID: ADSL.SUBJID</span></span>
<span><span class="co">#&gt;  ADSL.AGEU: ADSL.AGEU</span></span>
<span><span class="co">#&gt;  ADSL.SAFFL if needed: ADSL.SAFFL if needed</span></span>
<span><span class="co">#&gt;  ADSL.FASFL if needed: ADSL.FASFL if needed</span></span>
<span><span class="co">#&gt;  ADSL.ITTFL if needed: ADSL.ITTFL if needed</span></span>
<span><span class="co">#&gt;  ADSL.ITTEFL if required: ADSL.ITTEFL if required</span></span>
<span><span class="co">#&gt;  ADSL.PPROTFL if needed: ADSL.PPROTFL if needed</span></span>
<span><span class="co">#&gt;  ADSL.TRTSDT: ADSL.TRTSDT</span></span>
<span><span class="co">#&gt;  ADSL.TRTEDT: ADSL.TRTEDT</span></span>
<span><span class="co">#&gt;  ADSL.TR01SDT: ADSL.TR01SDT</span></span>
<span><span class="co">#&gt;  ADSL.TR01EDT: ADSL.TR01EDT</span></span>
<span><span class="co">#&gt;  CE.CESEQ: CE.CESEQ</span></span>
<span><span class="co">#&gt;  CE.CEREFID: CE.CEREFID</span></span>
<span><span class="co">#&gt;  CE.CETERM: CE.CETERM</span></span>
<span><span class="co">#&gt;  Study-specific definition: Study-specific definition</span></span>
<span><span class="co">#&gt;  CE.CNDPREV: CE.CNDPREV</span></span>
<span><span class="co">#&gt;  CE.CESTDTC: CE.CESTDTC</span></span>
<span><span class="co">#&gt;  ADSL.DTHFL: ADSL.DTHFL</span></span>
<span><span class="co">#&gt;  ADSL.DTHFN: ADSL.DTHFN</span></span>
<span><span class="co">#&gt;  ADSL.DTHDT: ADSL.DTHDT</span></span>
<span><span class="co">#&gt;  Cause of Death.: Cause of Death.</span></span>
<span><span class="co">#&gt;  CM.STUDYID: CM.STUDYID</span></span>
<span><span class="co">#&gt;  CM.USUBJID: CM.USUBJID</span></span>
<span><span class="co">#&gt;  CM.SUBJID: CM.SUBJID</span></span>
<span><span class="co">#&gt;  CM.CMSTDTC: CM.CMSTDTC</span></span>
<span><span class="co">#&gt;  CM.CMSTRF: CM.CMSTRF</span></span>
<span><span class="co">#&gt;  CM.CMENDTC: CM.CMENDTC</span></span>
<span><span class="co">#&gt;  CM.CMENRF: CM.CMENRF</span></span>
<span><span class="co">#&gt;  CM.CMSEQ: CM.CMSEQ</span></span>
<span><span class="co">#&gt;  CM.CMREFID: CM.CMREFID</span></span>
<span><span class="co">#&gt;  CM.CMTRT: CM.CMTRT</span></span>
<span><span class="co">#&gt;  CM.CMCAT: CM.CMCAT</span></span>
<span><span class="co">#&gt;  CM.CMSCAT: CM.CMSCAT</span></span>
<span><span class="co">#&gt;  CM.CMINDC: CM.CMINDC</span></span>
<span><span class="co">#&gt;  CM.CMDOSE: CM.CMDOSE</span></span>
<span><span class="co">#&gt;  CM.CMDOSTXT: CM.CMDOSTXT</span></span>
<span><span class="co">#&gt;  CM.CMDOSU: CM.CMDOSU</span></span>
<span><span class="co">#&gt;  CM.CMDOSFRQ: CM.CMDOSFRQ</span></span>
<span><span class="co">#&gt;  CM.CMROUTE: CM.CMROUTE</span></span>
<span><span class="co">#&gt;  CM.CMPRESP: CM.CMPRESP</span></span>
<span><span class="co">#&gt;  CM.CMCLAS: CM.CMCLAS</span></span>
<span><span class="co">#&gt;  CM.CMCLASCD: CM.CMCLASCD</span></span>
<span><span class="co">#&gt;  GSKDRUG.CMATC1 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C': GSKDRUG.CMATC1 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C'</span></span>
<span><span class="co">#&gt;  GSKDRUG.CMATC2 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C': GSKDRUG.CMATC2 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C'</span></span>
<span><span class="co">#&gt;  GSKDRUG.CMATC3 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C': GSKDRUG.CMATC3 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C'</span></span>
<span><span class="co">#&gt;  GSKDRUG.CMATC4 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C': GSKDRUG.CMATC4 where GSKDRUG.CMDRGCOL = CM.DRGCOLCD and GSKDRUG.CMNC = 'C'</span></span>
<span><span class="co">#&gt;  CM.CMDUR: CM.CMDUR</span></span>
<span><span class="co">#&gt;  CM.CMOCCUR: CM.CMOCCUR</span></span>
<span><span class="co">#&gt;  CM.CMDOSFRM: CM.CMDOSFRM</span></span>
<span><span class="co">#&gt;  DA.STUDYID: DA.STUDYID</span></span>
<span><span class="co">#&gt;  DA.USUBJID: DA.USUBJID</span></span>
<span><span class="co">#&gt;  DA.SUBJID: DA.SUBJID</span></span>
<span><span class="co">#&gt;  DA.VISITNUM: DA.VISITNUM</span></span>
<span><span class="co">#&gt;  DA.VISIT: DA.VISIT</span></span>
<span><span class="co">#&gt;  DA.DACAT: DA.DACAT</span></span>
<span><span class="co">#&gt;  DA.DASCAT: DA.DASCAT</span></span>
<span><span class="co">#&gt;  DA.DASEQ: DA.DASEQ</span></span>
<span><span class="co">#&gt;  DA.DADTC: DA.DADTC</span></span>
<span><span class="co">#&gt;  DA.DADY: DA.DADY</span></span>
<span><span class="co">#&gt;  DA.DATEST and/or derived. Example contains "Compliance %": DA.DATEST and/or derived. Example contains "Compliance %"</span></span>
<span><span class="co">#&gt;  DA.DATESTCD and/or derived: DA.DATESTCD and/or derived</span></span>
<span><span class="co">#&gt;  ADSL.STUDYID: ADSL.STUDYID</span></span>
<span><span class="co">#&gt;  ADSL.USUBJID: ADSL.USUBJID</span></span>
<span><span class="co">#&gt;  FAAE.SUBJID: FAAE.SUBJID</span></span>
<span><span class="co">#&gt;  FAAE.FATPTREF: FAAE.FATPTREF</span></span>
<span><span class="co">#&gt;  FAAE.FATPTNUM: FAAE.FATPTNUM</span></span>
<span><span class="co">#&gt;  FAAE.FATPT: FAAE.FATPT</span></span>
<span><span class="co">#&gt;  DD.STUDYID: DD.STUDYID</span></span>
<span><span class="co">#&gt;  DD.USUBJID: DD.USUBJID</span></span>
<span><span class="co">#&gt;  ADSL.ACTARM: ADSL.ACTARM</span></span>
<span><span class="co">#&gt;  ADSL.ENRLFL: ADSL.ENRLFL</span></span>
<span><span class="co">#&gt;  ADSL.AP01SDT: ADSL.AP01SDT</span></span>
<span><span class="co">#&gt;  ADSL.AP01SDTM: ADSL.AP01SDTM</span></span>
<span><span class="co">#&gt;  ADSL.AP01EDT: ADSL.AP01EDT</span></span>
<span><span class="co">#&gt;  ADSL.AP01EDTM: ADSL.AP01EDTM</span></span>
<span><span class="co">#&gt;  DD.DDTPTREF: DD.DDTPTREF</span></span>
<span><span class="co">#&gt;  DD.DDTPTNUM: DD.DDTPTNUM</span></span>
<span><span class="co">#&gt;  DD.DDTPT: DD.DDTPT</span></span>
<span><span class="co">#&gt;  DS.STUDYID: DS.STUDYID</span></span>
<span><span class="co">#&gt;  DS.USUBJID: DS.USUBJID</span></span>
<span><span class="co">#&gt;  DS.SUBJID: DS.SUBJID</span></span>
<span><span class="co">#&gt;  DS.DSSTDTC: DS.DSSTDTC</span></span>
<span><span class="co">#&gt;  DS.DSSEQ: DS.DSSEQ</span></span>
<span><span class="co">#&gt;  DM.STUDYID: DM.STUDYID</span></span>
<span><span class="co">#&gt;  DM.USUBJID: DM.USUBJID</span></span>
<span><span class="co">#&gt;  DQ.SUBJID: DQ.SUBJID</span></span>
<span><span class="co">#&gt;  SUPPDM.QVAL when QNAM=RACEOR or QNAM=RACEORx  where x=1,2, ..., n.: SUPPDM.QVAL when QNAM=RACEOR or QNAM=RACEORx  where x=1,2, ..., n.</span></span>
<span><span class="co">#&gt;  ADSL.ARACE: ADSL.ARACE</span></span>
<span><span class="co">#&gt;  ADSL.ARACEN: ADSL.ARACEN</span></span>
<span><span class="co">#&gt;  ADSL.INVID: ADSL.INVID</span></span>
<span><span class="co">#&gt;  ADSL.INVNAM: ADSL.INVNAM</span></span>
<span><span class="co">#&gt;  ADSL.COUNTRY: ADSL.COUNTRY</span></span>
<span><span class="co">#&gt;  ADSL.AGEGR1: ADSL.AGEGR1</span></span>
<span><span class="co">#&gt;  ADSL.AGEGR1N: ADSL.AGEGR1N</span></span>
<span><span class="co">#&gt;  ADSL.RACEN: ADSL.RACEN</span></span>
<span><span class="co">#&gt;  ADSL.ETHNIC: ADSL.ETHNIC</span></span>
<span><span class="co">#&gt;  ADSL.ETHNICN: ADSL.ETHNICN</span></span>
<span><span class="co">#&gt;  ADSL.TOTFL: ADSL.TOTFL</span></span>
<span><span class="co">#&gt;  ADSL.TOTFN: ADSL.TOTFN</span></span>
<span><span class="co">#&gt;  ADSL.ITTFN: ADSL.ITTFN</span></span>
<span><span class="co">#&gt;  ADSL.PPROTFN: ADSL.PPROTFN</span></span>
<span><span class="co">#&gt;  ADSL.COMPLFL: ADSL.COMPLFL</span></span>
<span><span class="co">#&gt;  ADSL.COMPLFN: ADSL.COMPLFN</span></span>
<span><span class="co">#&gt;  ADSL.RUNFFL: ADSL.RUNFFL</span></span>
<span><span class="co">#&gt;  ADSL.RUNFFN: ADSL.RUNFFN</span></span>
<span><span class="co">#&gt;  ADSL.SCRFFL: ADSL.SCRFFL</span></span>
<span><span class="co">#&gt;  ADSL.SCRFFN: ADSL.SCRFFN</span></span>
<span><span class="co">#&gt;  ADSL.ARM: ADSL.ARM</span></span>
<span><span class="co">#&gt;  ADSL.ARMCD: ADSL.ARMCD</span></span>
<span><span class="co">#&gt;  ADSL.TRTxxP, where xx is the value for APERIOD: ADSL.TRTxxP, where xx is the value for APERIOD</span></span>
<span><span class="co">#&gt;  ADSL.TRTxxA, where xx is the value for APERIOD: ADSL.TRTxxA, where xx is the value for APERIOD</span></span>
<span><span class="co">#&gt;  ADSL.RANDDT: ADSL.RANDDT</span></span>
<span><span class="co">#&gt;  ADSL.RFSTDT: ADSL.RFSTDT</span></span>
<span><span class="co">#&gt;  ADSL.RFENDT: ADSL.RFENDT</span></span>
<span><span class="co">#&gt;  ADSL.APxxSDT, where xx is the value for APERIOD: ADSL.APxxSDT, where xx is the value for APERIOD</span></span>
<span><span class="co">#&gt;  ADSL.APxxEDT, where xx is the value for APERIOD: ADSL.APxxEDT, where xx is the value for APERIOD</span></span>
<span><span class="co">#&gt; Warning: The following variables have code ids not found in the codelist(s):</span></span>
<span><span class="co">#&gt;  ASTDT</span></span>
<span><span class="co">#&gt;  ASTTM</span></span>
<span><span class="co">#&gt;  ASTDTM</span></span>
<span><span class="co">#&gt;  AENDT</span></span>
<span><span class="co">#&gt;  AENTM</span></span>
<span><span class="co">#&gt;  AENDTM</span></span>
<span><span class="co">#&gt;  AESTDTC</span></span>
<span><span class="co">#&gt;  AEENDTC</span></span>
<span><span class="co">#&gt;  AEDECOD</span></span>
<span><span class="co">#&gt;  AEBODSYS</span></span>
<span><span class="co">#&gt;  AEBDSYCD</span></span>
<span><span class="co">#&gt;  AELLT</span></span>
<span><span class="co">#&gt;  AELLTCD</span></span>
<span><span class="co">#&gt;  AEPTCD</span></span>
<span><span class="co">#&gt;  AEHLT</span></span>
<span><span class="co">#&gt;  AEHLTCD</span></span>
<span><span class="co">#&gt;  AEHLGT</span></span>
<span><span class="co">#&gt;  AEHLGTCD</span></span>
<span><span class="co">#&gt;  AESOC</span></span>
<span><span class="co">#&gt;  AESOCCD</span></span>
<span><span class="co">#&gt;  AEDUR</span></span>
<span><span class="co">#&gt;  ASEVN</span></span>
<span><span class="co">#&gt;  AEOUTN</span></span>
<span><span class="co">#&gt;  AETOXGR</span></span>
<span><span class="co">#&gt;  AETOXGRN</span></span>
<span><span class="co">#&gt;  TRTSDT</span></span>
<span><span class="co">#&gt;  TRTEDT</span></span>
<span><span class="co">#&gt;  TR01SDT</span></span>
<span><span class="co">#&gt;  TR01EDT</span></span>
<span><span class="co">#&gt;  DTHDT</span></span>
<span><span class="co">#&gt;  TPERIOD</span></span>
<span><span class="co">#&gt;  TPERIODC</span></span>
<span><span class="co">#&gt;  CMDUR</span></span>
<span><span class="co">#&gt;  ADT</span></span>
<span><span class="co">#&gt;  ATM</span></span>
<span><span class="co">#&gt;  ADTM</span></span>
<span><span class="co">#&gt;  PARAMCD</span></span>
<span><span class="co">#&gt;  AP01SDT</span></span>
<span><span class="co">#&gt;  AP01SDTM</span></span>
<span><span class="co">#&gt;  AP01EDT</span></span>
<span><span class="co">#&gt;  AP01EDTM</span></span>
<span><span class="co">#&gt;  PARCAT1</span></span>
<span><span class="co">#&gt;  PARCAT1N</span></span>
<span><span class="co">#&gt;  PARAM</span></span>
<span><span class="co">#&gt;  PARAMCD</span></span>
<span><span class="co">#&gt;  RACEORCD</span></span>
<span><span class="co">#&gt;  ARACE</span></span>
<span><span class="co">#&gt;  ETHNIC</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Metadata successfully imported</span></span>
<span><span class="co">#&gt; Metacore object contains metadata for 4 datasets</span></span></code></pre></div>
<p>And we’re good to go!</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Christina Fillmore, Maya Gans, Ashley Tarasiewicz, Mike Stackhouse, GSK/Atorus JPT.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
