<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows • metacore</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A Centralized Metadata Object Focus on Clinical Trial Data Programming Workflows">
<meta name="description" content="Create an immutable container holding metadata for the purpose of better enabling programming activities and functionality of other packages within the clinical programming workflow.">
<meta property="og:description" content="Create an immutable container holding metadata for the purpose of better enabling programming activities and functionality of other packages within the clinical programming workflow.">
<meta property="og:image" content="https://atorus-research.github.io/metacore/reference/figures/metacore.PNG">
<meta property="og:image:alt" content="metacore Hex Sticker">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">metacore</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Building_Specification_Readers.html">Building Specification Readers</a></li>
    <li><a class="dropdown-item" href="articles/Example.html">Example</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/atorus-research/metacore/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="metacore-">metacore <a href="https://github.com/atorus-research/metacore" class="external-link"><img src="reference/figures/metacore.PNG" align="right" style="height:139px;" alt="Metacore Package Hex Sticker"></a>
<a class="anchor" aria-label="anchor" href="#metacore-"></a>
</h1></div>
<!-- badges: start -->

<p>Programming for clinical trial data analysis tends to be very standardized. With data standards such as <a href="https://www.cdisc.org/" class="external-link">CDISC</a>, expectations tend to be very clearly defined. Within these programming activities, there’s ample room for the use of metadata. Metadata can be used for several different purposes, such as applying dataset attributes, establishing sort sequences, working with controlled terminology, and more. Despite CDISC standards, organizations tend to have their own means of storing metadata, be it in excel spreadsheets, databases, and more.</p>
<p>The purpose of metacore is to establish a common foundation for the use of metadata within an R session. This is done by creating an R object that can hold the necessary data in a standardized, immutable structure (using R6) that makes it easy to extract out necessary information when needed. Users can read in their metadata from their various sources. To make this easy, we’ve provided some helper functions - and even have readers that can read directly from Define.xml 2.0. By establishing a common and consistent object in memory, further packages that support these work flows can have a common foundation upon which tools can be built that leverage metadata in the future. This reduces the need to hold different data structures containing metadata and instead allows programs to pull this information from a centralized source.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the current development version of metacore from <a href="https://github.com/atorus-research/metacore" class="external-link">github</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"atorus-research/metacore"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a>
</h2>
<p>A metacore object is made-up of 6 different tables, which are connected with a series of identifying columns. The goal of these tables is to normalize the information as much as possible, while keeping together like information. Each table has a basic theme to make them easier to remember. They are as follows:</p>
<ul>
<li><p><strong>ds_spec</strong>: Contains dataset level information</p></li>
<li><p><strong>ds_vars</strong>: Bridges the dataset and variable level information</p></li>
<li><p><strong>var_spec</strong>: Contains variable level information</p></li>
<li><p><strong>value_spec</strong>: Contains value level information</p></li>
<li><p><strong>derivations</strong>: Contains all derivations</p></li>
<li><p><strong>codelist</strong>: Contains information about code/decodes, permitted values and external libraries</p></li>
<li><p><strong>supp</strong>: Contains information specific to supplemental variables</p></li>
</ul>
<p>Here is a schema of how all this fits together:</p>
<figure><img src="reference/figures/schema-colors.png" title="man/figures/Metacore Schema" alt="Schema diagram showing the relationships between all metacore tables (variable names not included)"><figcaption aria-hidden="true">
Schema diagram showing the relationships between all metacore tables (variable names not included)
</figcaption></figure><div class="section level3">
<h3 id="ds_spec-">ds_spec <img src="reference/figures/labeled-ds_spec.png" align="right" style="height:150px;" alt="Diagram of ds_spec table structure"><a class="anchor" aria-label="anchor" href="#ds_spec-"></a>
</h3>
<p>This table covers the basic information about each dataset. There is only a single row per dataset, with the following information:</p>
<ul>
<li><p><em>dataset</em>: The abbreviated name of the dataset (e.g. AE)</p></li>
<li><p><em>structure</em>: Value structure of the dataset as a sting</p></li>
<li><p><em>label</em>: Dataset label</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="ds_vars-">ds_vars <img src="reference/figures/labeled-ds_vars.png" align="right" style="height:150px;" alt="Diagram of ds_vars table structure"><a class="anchor" aria-label="anchor" href="#ds_vars-"></a>
</h3>
<p>This table contains the information that bridges between purely dataset level and purely variable level. There is one row per dataset per variable:</p>
<ul>
<li><p><em>dataset</em>: The abbreviated name of the dataset. This will match to the name in <strong>ds_spec</strong></p></li>
<li><p><em>variable</em>: Variable name</p></li>
<li><p><em>key_seq</em>: Sequence key, which are the variables used to order a dataset. This is a column of integers, where 1 is the first sorting variable and 2 is the second etc. If the variable is not used in sorting it will be left <code>NA</code></p></li>
<li><p><em>order</em>: Order sets the order of the columns to appear in the dataset. This is also a numeric value</p></li>
<li><p><em>keep</em>: Logical value about if the variable needs to be kept</p></li>
<li><p><em>core</em>: ADaM core, which should be one of the following values: “Expected”, “Required”, “Permissible”, “Conditionally Required”, “Conditionally Expected”, or NA. For more information about core see <a href="https://www.cdisc.org/standards/foundational/adam" class="external-link">CDISC</a></p></li>
<li><p><em>supp_flag</em>: Logical to determine if the variable is in the supplemental datasets</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="var_spec-">var_spec <img src="reference/figures/labeled-var_spec.png" align="right" style="height:150px;" alt="Diagram of var_spec table structure"><a class="anchor" aria-label="anchor" href="#var_spec-"></a>
</h3>
<p>This table contains the purely variable level information. The goal is there is a single row per variable, which is common across all datasets. This helps ensure variables follow the CDISC standard. But, this isn’t always possible, so if information for a given variable differs across datasets, the variable will be recorded as dataset.variable in the variable column.</p>
<ul>
<li><p><em>variable</em>: Variable name, which should match the name in <strong>ds_spec</strong>. Unless the variable needs to be duplicated, then the name will be a combination of the the dataset name and variable name from <strong>ds_spec</strong> (dataset.variable)</p></li>
<li><p><em>type</em>: Variable class</p></li>
<li><p><em>length</em>: Variable length (while not relevant to R datasets, this is important for when creating XPT files)</p></li>
<li><p><em>label</em>: Variable label</p></li>
<li><p><em>common</em>: Common across ADaM datasets</p></li>
<li><p><em>format</em>: Variable format</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="value_spec-">value_spec <img src="reference/figures/labeled-value_spec.png" align="right" style="height:150px;" alt="Diagram of value_spec table structure"><a class="anchor" aria-label="anchor" href="#value_spec-"></a>
</h3>
<p>This table contains the information the information at the value level. There will be at least one row per dataset/variable combination. There is more than one row per dataset/variable combination if the combination has values which have differing metadata. For instance LBORRES that are different data types depending on the value. The information contained are as follows:</p>
<ul>
<li><p><em>dataset</em>: The abbreviated name of the dataset. This will match to the name in <strong>ds_spec</strong></p></li>
<li><p><em>variable</em>: Variable name. This will match to the name in <strong>ds_vars</strong></p></li>
<li><p><em>type</em>: String of the value type</p></li>
<li><p><em>origin</em>: Origin of the value</p></li>
<li><p><em>sig_dig</em>: Significant digits of the value</p></li>
<li><p><em>code_id</em>: ID for the code list to match the id in the <strong>codelist</strong> table</p></li>
<li><p><em>where</em>: Value of the variable</p></li>
<li><p><em>derivation_id</em>: ID for the derivation to match with the <strong>derivation</strong> table</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="derivations-">derivations <img src="reference/figures/labeled-derivation.png" align="right" style="height:150px;" alt="Diagram of derivation table structure"><a class="anchor" aria-label="anchor" href="#derivations-"></a>
</h3>
<p>This table has all the derivation information, with one row per derivation ID and the following information:</p>
<ul>
<li><p><em>derivation_id</em>: The ID, which should match to <strong>value_spec</strong></p></li>
<li><p><em>derivation</em>: Text describing the derivation</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="codelist-">codelist <img src="reference/figures/labeled-code_list.png" align="right" style="height:150px;" alt="Diagram of codelist table structure"><a class="anchor" aria-label="anchor" href="#codelist-"></a>
</h3>
<p>This table contains the code lists, permitted value lists, and external libraries nested within a tibble. There is only a single row per list/library, with the following information:</p>
<ul>
<li><p><em>code_id</em>: the ID used to identify the code list. This should be the same as the <em>code_id</em> in <strong>val_spec</strong></p></li>
<li><p><em>name</em>: Name of the code list</p></li>
<li><p><em>code</em>: A list of tibbles (for code / decode combinations) and vectors (for permitted values and libraries), which contain all the codes</p></li>
<li><p><em>type</em>: An indicator of if the information in the code column is a code/decode table, permitted value, or external library</p></li>
</ul>
</div>
<div class="section level3">
<h3 id="supp-">supp <img src="reference/figures/labeled-supp.png" align="right" style="height:150px;" alt="Diagram of supp table structure"><a class="anchor" aria-label="anchor" href="#supp-"></a>
</h3>
<p>This table contains the information needed to create supplemental tables. If you want to add a variable which will go into a supplemental qualifier then you can create as normal (i.e. label information going to the <strong>var_spec</strong> table and derivation and origin going into the <strong>value_spec</strong> table), but you need to flag it as supplemental in the <strong>ds_vars</strong> table and add a row to the <strong>supp</strong> table. There is only a single row per dataset/variable, with the following information:</p>
<ul>
<li><p><em>dataset</em>: The abbreviated name of the dataset. This will match to the name in <strong>ds_spec</strong></p></li>
<li><p><em>variable</em>: Variable name. This will match to the name in <strong>ds_spec</strong></p></li>
<li><p><em>idvar</em>: ID variable used for the supplemental variable. Can be left missing if not needed</p></li>
<li><p><em>qeval</em>: Evaluator for the supplemental variable</p></li>
</ul>
<p>To get more information about the metacore objects and how to build a specification reader, please see our vignettes.</p>
<figure><img src="reference/figures/labeled_schema.png" title="man/figures/Metacore Schema" alt="Schema diagram showing the relationships between all metacore tables"><figcaption aria-hidden="true">
Schema diagram showing the relationships between all metacore tables
</figcaption></figure>
</div>
</div>
<div class="section level2">
<h2 id="future-development">Future Development<a class="anchor" aria-label="anchor" href="#future-development"></a>
</h2>
<p>This is an alpha release of this package, so if you have ideas on future improvements please add them to the issue log.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=metacore" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/atorus-research/metacore/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/atorus-research/metacore/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing metacore</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Liam Hobby <br><small class="roles"> Author, maintainer </small>   </li>
<li>Christina Fillmore <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-0595-2302" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Bill Denney <br><small class="roles"> Author </small>   </li>
<li>Maya Gans <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-5452-6089" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Ashley Tarasiewicz <br><small class="roles"> Author </small>   </li>
<li>Mike Stackhouse <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0001-6030-723X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Tamara Senior <br><small class="roles"> Author </small>   </li>
<li>GSK/Atorus JPT <br><small class="roles"> Copyright holder, funder </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://RValidationHub.slack.com" class="external-link"><img src="https://img.shields.io/badge/Slack-RValidationHub-blue?style=flat&amp;logo=slack" alt="Slack Status"></a></li>
<li><a href="https://CRAN.R-project.org/package=metacore" class="external-link"><img src="https://www.r-pkg.org/badges/version/metacore" alt="CRAN status"></a></li>
<li><a href="https://app.codecov.io/gh/atorus-research/metacore" class="external-link"><img src="https://codecov.io/gh/atorus-research/metacore/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/atorus-research/metacore/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/atorus-research/metacore/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://cran.r-project.org/package=metacore" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/metacore?color=green" alt="Total Downloads"></a></li>
<li><a href="https://github.com/atorus-research/metacore/blob/master/LICENSE" class="external-link"><img src="https://img.shields.io/badge/License-MIT-blue.svg" alt="MIT License"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Liam Hobby, Christina Fillmore, Bill Denney, Maya Gans, Ashley Tarasiewicz, Mike Stackhouse, Tamara Senior, GSK/Atorus JPT.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
